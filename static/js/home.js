// Generated by CoffeeScript 1.4.0
(function() {

  $(function() {
    var App, DayModel, DayView, HomeModel, HomeView, InputView, PlanModel, PlanView, PlannerModel, PlannerView, TaskModel, TaskView, WeekView, checkin, json_data, now, nowTemp;
    nowTemp = new Date();
    now = new Date(nowTemp.getFullYear(), nowTemp.getMonth(), nowTemp.getDate(), 0, 0, 0, 0);
    checkin = $("#taskDate").datepicker({
      onRender: function(date) {
        if (date.valueOf() < now.valueOf()) {
          return "disabled";
        } else {
          return "";
        }
      }
    });
    console.log("datepicker init");
    json_data = {};
    $.ajax({
      url: '/home_data',
      async: false,
      success: function(data) {
        return json_data = data;
      }
    });
    console.log("Get data");
    HomeModel = Backbone.Model.extend({
      initialize: function() {
        return console.log("dashboard model initialized");
      }
    });
    TaskModel = Backbone.Model.extend({});
    PlanModel = Backbone.Model.extend({});
    DayModel = Backbone.Model.extend({});
    PlannerModel = Backbone.Model.extend({});
    HomeView = Backbone.View.extend({
      el: '#home',
      initialize: function() {
        this.model = new HomeModel;
        this.input = new InputView;
        this.thisWeek = new WeekView({
          type: 'this',
          model: this.model
        });
        this.nextWeek = new WeekView({
          type: 'next',
          model: this.model
        });
        return this.planner = new PlannerView;
      }
    });
    WeekView = Backbone.View.extend({
      initialize: function(spec) {
        if (this.type === 'this') {

        } else if (this.type === 'next') {

        } else {

        }
      }
    });
    PlannerView = Backbone.View.extend({
      el: $(".planner"),
      initialize: function() {},
      render: function() {}
    });
    DayView = Backbone.View.extend({
      el: $(".day"),
      initialize: function() {},
      render: function() {}
    });
    TaskView = Backbone.View.extend({
      el: $(".task"),
      model: TaskModel,
      template: _.template($("#task_template").html()),
      events: {
        "click .toggle": "toggleDone"
      },
      initialize: function() {
        this.listenTo(this.model, "change", this.render);
        return this.listenTo(this.model, "destroy", this.remove);
      }
    });
    PlanView = Backbone.View.extend({
      el: $(".plan"),
      events: {
        "click .toggle": "toggleDone"
      },
      initialize: function() {},
      toggleDone: function() {},
      move: function() {}
    });
    return InputView = Backbone.View.extend({
      el: $(".task_input"),
      events: {
        "keypress .add_task": "create"
      },
      initialize: function() {
        this.home = this.task_name = this.$(".task_name");
        this.task_date = this.$(".task_date");
        return this.task_length = this.$(".task_length");
      },
      create: function() {
        var data;
        data = {
          name: this.task_name,
          date: this.task_date,
          length: this.task_length
        };
        return $.post("/addtask", data, function(d, st, xr) {
          return "Done";
        });
      }
    }, App = new HomeView());
  });

}).call(this);
